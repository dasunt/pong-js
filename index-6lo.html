<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8" />
    <title>Gamedev Canvas Workshop</title>
    <style>
      * {
        padding: 0;
        margin: 0;
      }

      canvas {
        background: rgb(175, 171, 171);
        display: block;
        margin: 0 auto;
      }
    </style>
  </head>

  <body>
    <br/>
   
     <br/>
     
     <h1 style="position:absolute;left:50%;top:10px;font-size:30px;">
       Pong
     </h1>
     
<h1 style="position:absolute;left:20%;top:40px;">
  Player 1: 
  <span id="score1">
    0
  </span></h1>
     
<h1 style="position:absolute;right:20%;top:40px;">
  Player 2: 
  <span id="score2">
    0
  </span>
</h1>
     

      
    
<canvas id="myCanvas" width="960" height="480" style="margin-left:auto;margin-right:auto;margin-top:50px;"></canvas>

    <script>
      var canvas = document.getElementById("myCanvas");
      var ctx = canvas.getContext("2d");
      var num = document.getElementById("score1");
      
      var x = canvas.width / 2;
      var y = canvas.height / 2;
      var radius = 7;
      dx = 4;
      dy = -4;
      
      var p1score = 0;
      var p2score = 0;

      
  
      
      // paddle parameters
      var paddleHeight = 75;
      var paddleWidth = 6;
      var paddleY2 = (canvas.height / 2) - (paddleHeight / 2);
      var paddleY1 = (canvas.height / 2) - (paddleHeight / 2);
      var paddleX2 = canvas.width - 30;
      var paddleX1 = 30;
      
      var downPressed2 = false;
      var upPressed2 = false;
      
      var downPressed1 = false;
      var upPressed1 = false;
      //var paddleX = (canvas.width - paddleWidth) / 2;






      function drawball() {
        ctx.beginPath();
        ctx.arc(x, y, radius, 0, Math.PI * 2);
        ctx.fillStyle = "rgb(240, 1, 1)";
        ctx.fill();
        ctx.closePath();

        //bouncing off top and bottum
        if (y + dy < radius || y + dy > canvas.height - radius) {
          dy = -dy;
        }

        //scoring on the left
        if (x + dx < radius) {
          p2score++;
         document.getElementById("score2").innerHTML = p2score;
          x = canvas.width / 2;
          y = canvas.height / 2;
        }
        
        //bouncing off paddle2
        if ((x+dx>paddleX2 && x+dx<(paddleX2+paddleWidth)) && (y>paddleY2) && (y<(paddleY2+paddleHeight))) {
            dx = -dx;
          }
          
        //bouncing off paddle1
        if ((x+dx>paddleX1 && x+dx<(paddleX1+paddleWidth)) && (y>paddleY1) && (y<(paddleY1+paddleHeight))) {
            dx = -dx;
          }  
          
          
         //scoring on the right
        if(x+dx>canvas.width){
         p1score++;
         document.getElementById("score1").innerHTML = p1score;
          x = canvas.width / 2;
          y = canvas.height / 2;
         
        }
         // if (x + dx > (canvas.width)){
         //   alert("GAME OVER!");
         //   document.location.reload();
         // }
        

        /*	else if (y + dy > canvas.height - radius) {
         
         if (x > paddleX && x < (paddleX + paddleWidth)) {
         dy = -dy;
         }
         else {
         alert("GAME OVER!");
         document.location.reload();
         }
         }*/

        x = x + dx;
        y = y + dy;

      }



      function drawPaddle2() {
        ctx.beginPath();
        ctx.rect(paddleX2, paddleY2, paddleWidth, paddleHeight);
        ctx.fillStyle = "rgb(1, 100, 233)";
        ctx.fill();
        ctx.closePath();

        document.addEventListener("keydown", keyDownHandler, false);
        document.addEventListener("keyup", keyUpHandler, false);

        function keyDownHandler(e) {
          if (e.keyCode == 38) {
            upPressed2 = true;
          } else if (e.keyCode == 40) {
            downPressed2 = true;
          }
        }

        function keyUpHandler(e) {
          if (e.keyCode == 38) {
            upPressed2 = false;
          } else if (e.keyCode == 40) {
            downPressed2 = false;
          }
        }

        if (downPressed2 && paddleY2 < canvas.height - paddleHeight) {
          paddleY2 += 7;
        } else if (upPressed2 && paddleY2 > 0) {
          paddleY2 -= 7;
        }
        
        
        
      }


 function drawPaddle1() {
        ctx.beginPath();
        ctx.rect(paddleX1, paddleY1, paddleWidth, paddleHeight);
        ctx.fillStyle = "rgb(1, 100, 233)";
        ctx.fill();
        ctx.closePath();

        document.addEventListener("keydown", keyDownHandler, false);
        document.addEventListener("keyup", keyUpHandler, false);

        function keyDownHandler(e) {
          if (e.keyCode == 87) {
            upPressed1 = true;
          } else if (e.keyCode == 83) {
            downPressed1 = true;
          }
        }

        function keyUpHandler(e) {
          if (e.keyCode == 87) {
            upPressed1 = false;
          } else if (e.keyCode == 83) {
            downPressed1 = false;
          }
        }

        if (downPressed1 && paddleY1 < canvas.height - paddleHeight) {
          paddleY1 += 7;
        } else if (upPressed1 && paddleY1 > 0) {
          paddleY1 -= 7;
        }
        
       
        
      }


//myScore = new component("30px", "Consolas", "black", 280, 40, "text");


      function drawframe() {
        
     //   myScore.text="SCORE: " + myGameArea.frameNo;
    //myScore.update();
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        
        
        drawball();
        drawPaddle2();
        drawPaddle1();
      }



      setInterval(drawframe, 7);

    </script>

  </body>

</html>